language: java
jdk: openjdk7
sudo: required
branches:
  except: "/^v\\d/"
env:
  matrix:
  - DIST=precise DIST_VERSION=12.04
  - DIST=raring DIST_VERSION=13.04
  - DIST=trusty DIST_VERSION=14.04
  - DIST=vivid DIST_VERSION=15.04
  - DIST=xenial DIST_VERSION=16.04
  - DIST=zesty DIST_VERSION=17.04
before_install: sudo apt-get install build-essential debhelper devscripts dh-make lintian
install: true
before_script: if [ "$TRAVIS_BRANCH" != "master" ]; then export SIGNING_OPTS="-uc -us"; fi
script: make deb
before_deploy:
- make docs
- echo -e $GPG_SECRET | gpg --import
deploy:
  provider: script
  script: dput ppa:cs50/ppa build/deb/*.changes
  skip_cleanup: true
  on:
    branch: master
notifications:
  slack:
    secure: ozhL9jaDDPMDj8FRStc+hMCT98rchuYNqN++pJBLN+/kbIGs8bAuEDDUp/kQbBSGp/Cw3aPjdjdnVNNkLc0D5btJvMxxJY2YLN7MtB7GdjSvqfLEq9RVZocP4RHiDSwsrvrWtzBI13bU9MC77Ouds83y+lG7nzhjyxKJjh4sXjxEeKsRTU6cteyrAkD8l+OTzgt/Fu6+Fh1TsxmWm6P7xWMwvz23QSdnDrVl5Hr5OAxtMCdlYi/+B5b4HzjV4nxk7JYUMULXIWtDaEueA4aQ6nzgRnVGTkqCSzeFCcVTNxtDd2/qQok/KcDK5I+yWpkgMCUg2jax7Qd4KY704IM2D8f87o5XE0gYlFLMZAKKpXCdNqsydBk7apu87Ou6m7qSJY42pggM73LjgFW2/d/t3zdv1qY1pgvgL5+Ke+LupkBFd6yPhqPVIFCzTujaA1VcsptEP5wRRfMjwVuL/wYlNclb+mPEfY15hzSIpYwXxPk2SJ7ySTtG0TgsP5zMe56Tb67UC/EAVf7jnAYkbGhrSw3KlEsnVhbGlSbtqLU7BBUwkx6kYAzm0rnykXIL/Tur8jRY3k28cdTSg/9LQtFf7ceGT9yZYZ6SarTIaSwwdMaehcknzCj4O0fun9RJzWmJWKLDXvhGfG2ekxpOAMQX1pJxJSHag40HNAtcPAe5skE=
